<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Color Catcher</title>
    <style>
      body {
        margin: 0;
        background: url("https://images.pexels.com/photos/3559235/pexels-photo-3559235.jpeg")
          no-repeat center center fixed;
        background-size: cover;
        font-family: Arial, sans-serif;
        color: #fff;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding-top: 20px;
      }
      #overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background: rgba(0, 0, 0, 0.6);
        z-index: -1;
      }
      h1 {
        text-shadow: 0 0 10px #0ff;
      }
      #game {
        position: relative;
        width: 400px;
        height: 600px;
        background: rgba(34, 34, 34, 0.85);
        border: 2px solid #0ff;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 0 20px #0ff;
      }
      #score {
        position: absolute;
        top: 10px;
        left: 10px;
        font-size: 18px;
        z-index: 10;
      }
      #catcher {
        position: absolute;
        bottom: 10px;
        left: 180px;
        width: 40px;
        height: 20px;
        background: #0ff;
        border-radius: 4px;
        box-shadow: 0 0 15px #0ff;
      }
      .ball {
        position: absolute;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        box-shadow: 0 0 10px currentColor;
      }
      #toggleButton {
        margin-top: 15px;
        padding: 10px 20px;
        font-size: 18px;
        background: #0ff;
        border: none;
        border-radius: 8px;
        color: #000;
        cursor: pointer;
        box-shadow: 0 0 15px #0ff;
        transition: background 0.2s;
      }
      #toggleButton:hover {
        background: #0ee;
      }
    </style>
  </head>
  <body>
    <div id="overlay"></div>

    <h1>ðŸŽ® Color Catcher</h1>

    <div id="game">
      <div id="score">Score: 0 | Lives: 3 | High Score: 0</div>
      <div id="catcher"></div>
    </div>

    <button id="toggleButton">Start</button>

    <script>
      const game = document.getElementById("game");
      const catcher = document.getElementById("catcher");
      const scoreDisplay = document.getElementById("score");
      const toggleButton = document.getElementById("toggleButton");

      let catcherX = 180;
      let score = 0;
      let lives = 3;
      const targetColor = "blue";

      const colors = ["red", "green", "blue", "yellow"];

      // High score from localStorage
      let highScore = localStorage.getItem("highScore") || 0;

      let isRunning = false;
      let ballInterval = null;
      let moveInterval = null;

      // Move catcher left/right with keyboard
      document.addEventListener("keydown", (e) => {
        if (!isRunning) return;
        if (e.key === "ArrowLeft" || e.key === "a") {
          catcherX = Math.max(0, catcherX - 20);
        } else if (e.key === "ArrowRight" || e.key === "d") {
          catcherX = Math.min(360, catcherX + 20);
        }
        catcher.style.left = catcherX + "px";
      });

      function createBall() {
        const ball = document.createElement("div");
        ball.className = "ball";
        const color = colors[Math.floor(Math.random() * colors.length)];
        ball.style.background = color;
        ball.style.color = color;
        ball.dataset.color = color;
        ball.style.left = Math.floor(Math.random() * 380) + "px";
        ball.style.top = "0px";
        game.appendChild(ball);
      }

      function updateScore() {
        if (score > highScore) {
          highScore = score;
          localStorage.setItem("highScore", highScore);
        }
        scoreDisplay.textContent = `Score: ${score} | Lives: ${lives} | High Score: ${highScore}`;

        if (lives <= 0) {
          alert("Game Over! Final score: " + score);
          stopGame();
          resetGame();
        }
      }

      function resetGame() {
        score = 0;
        lives = 3;
        updateScore();
        catcherX = 180;
        catcher.style.left = catcherX + "px";
        document.querySelectorAll(".ball").forEach((ball) => ball.remove());
      }

      function moveBalls() {
        const balls = Array.from(document.querySelectorAll(".ball"));
        balls.forEach((ball) => {
          let top = parseInt(ball.style.top);
          top += 5;
          ball.style.top = top + "px";

          const ballX = parseInt(ball.style.left);
          const ballY = top + 20; // bottom of ball

          // Collision detection
          if (
            ballY >= 580 &&
            ballX + 20 >= catcherX &&
            ballX <= catcherX + 40
          ) {
            if (ball.dataset.color === targetColor) {
              score++;
            } else {
              lives--;
            }
            ball.remove();
            updateScore();
            return;
          }

          if (top > 600) {
            ball.remove();
          }
        });
      }

      function startGame() {
        if (isRunning) return;
        isRunning = true;
        toggleButton.textContent = "Pause";
        ballInterval = setInterval(createBall, 1000);
        moveInterval = setInterval(moveBalls, 50);
      }

      function stopGame() {
        isRunning = false;
        toggleButton.textContent = "Start";
        clearInterval(ballInterval);
        clearInterval(moveInterval);
      }

      toggleButton.addEventListener("click", () => {
        if (isRunning) {
          stopGame();
        } else {
          startGame();
        }
      });

      // Initialize UI
      updateScore();
      catcher.style.left = catcherX + "px";
    </script>
  </body>
</html>
